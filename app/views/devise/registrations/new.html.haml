.row
  - role_ids = roles_ids_for_sign_up
  %h2.text-center
    = session[:role_id] == role_ids[:realtor] ? t('devise.registrations.reg_new_realtor') : t('devise.registrations.reg_new_user')
  = form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f|
    .text-center= devise_error_messages!
    %div{ class: session[:role_id] == role_ids[:agency_director] ? 'col-xs-6 col-sm-6 col-md-6' : 'col-xs-8 col-sm-8 col-md-10' }
      %h3.col-sm-offset-3
        = t('devise.registrations.main_info')
      = f.hidden_field :role_id, value: session[:role_id]
      .form-group
        .col-sm-8.col-sm-offset-3
          = f.label :first_name, class: 'control-label'
          = f.text_field :first_name, class: 'form-control', required: true
      .form-group
        .col-sm-8.col-sm-offset-3
          = f.label :last_name, class: 'control-label'
          = f.text_field :last_name, class: 'form-control', required: true
      .form-group
        .col-sm-8.col-sm-offset-3
          = f.label :email, class: 'control-label'
          = f.email_field :email, autofocus: true, class: 'form-control', required: true
      .form-group
        .col-sm-8.col-sm-offset-3
          = f.label :password, class: 'control-label'
          = f.password_field :password, autocomplete: 'off', class: 'form-control', required: true
      .form-group
        .col-sm-8.col-sm-offset-3
          = f.label :password, class: 'control-label'
          = f.password_field :password_confirmation, autocomplete: 'off', class: 'form-control', required: true
      .form-group
        .col-sm-8.col-sm-offset-3
          = f.label :phone, class: 'control-label'
          = f.telephone_field :phone, autofocus: true, class: 'form-control telephone-field',
                                      required: true, placeholder: '099-999-99-99'
      .form-group
        .col-sm-8.col-sm-offset-3.mart-5
          = f.label :locale, class: 'control-label'
          = f.select :locale, I18n.available_locales, class: 'form-control'
      .form-group
        .col-sm-8.col-sm-offset-3
          = f.label :avatar, class: 'control-label'
          = f.file_field :avatar
          = f.hidden_field :avatar_cache
    - if session[:role_id] == role_ids[:agency_director]
      .col-xs-6.col-sm-6.col-md-6
        %h3
          = t('devise.registrations.agency_info')
        = f.fields_for :owned_agency do |agency_form|
          .form-group
            .col-sm-8
              = agency_form.label :name, class: 'control-label'
              = agency_form.text_field :name, class: 'form-control', required: true
          .form-group
            .col-sm-8
              = agency_form.label :postal_address, class: 'control-label'
              = agency_form.text_field :postal_address, class: 'form-control', required: true
          .form-group
            .col-sm-8
              = agency_form.label :phisical_address, class: 'control-label'
              = agency_form.text_field :phisical_address, class: 'form-control', required: true
          .form-group
            .col-sm-8
              = agency_form.label :description, class: 'control-label'
              = agency_form.text_field :description, class: 'form-control'
          .form-group
            .col-sm-8
              = agency_form.label :phone, class: 'control-label'
              = agency_form.telephone_field :phone, autofocus: true, class: 'form-control telephone-field',
                                          required: true, placeholder: '099-999-99-99'
          .form-group
            .col-sm-8
              = agency_form.label :region_ids, class: 'control-label'
              = agency_form.collection_select :region_ids, Region.all, :id, :name,
                {include_blank: t('devise.registrations.select_agency_region_blank')}, {multiple: false, class: 'select2 region_select'}
          .form-group
            .col-sm-8
              = agency_form.label :city_ids, class: 'control-label'
              = agency_form.collection_select :city_ids, City.all, :id, :name,
                {include_blank: t('devise.registrations.select_agency_city_blank')}, {multiple: false, class: 'select2'}
    .form-group
      .col-sm-12.text-center.mart-5
        = f.submit t('devise.registrations.registrate'), class: 'btn btn-success'
